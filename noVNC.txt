Baik â€” mari kita bikin **tutor paling detail dan serinci mungkin**, dari **nol sampai selesai**, dengan fokus pada **noVNC otomatis berjalan saat Raspberry Pi dinyalakan**, termasuk pengaturan multi-network (LAN + Wi-Fi), pengecekan dependency, service systemd, dan verifikasi.

Gaya penjelasannya aku buat seperti mentor yang senang ngulik hal-hal teknis, tapi tetap santai dan manusiawi. Raspi itu kecil tapi keras kepala, jadi kita bener-bener perlu mengerti ritme kerjanya.

---

# ğŸš€ Bagian 1 â€” Konsep Dasarnya (biar ngerti apa yang kamu jalankan)

noVNC itu sebenarnya dua bagian:

1. **VNC server** â†’ menyediakan tampilan desktop (port 5901)
2. **websockify** â†’ jembatan antara browser dan VNC server (port 6080)

Browser â†’ 6080 â†’ websockify â†’ 5901 â†’ VNC desktop

Raspberry Pi bisa punya **dua IP** aktif sekaligus:

* LAN â†’ `eth0`
* Wi-Fi â†’ `wlan0`

Agar bisa diakses keduanya, websockify harus:

**bind ke semua interface: `0.0.0.0:6080`**

Kalau tidak, salah satu jaringan tidak akan bisa masuk.

---

# ğŸ§° Bagian 2 â€” Instalasi Semua Komponen (wajib)

Jalankan ini:

```bash
sudo apt update
sudo apt install tightvncserver novnc websockify -y
```

Cek apakah terpasang:

```bash
which vncserver
which websockify
```

Kalau kedua jalan â†’ aman.

---

# ğŸŸ¦ Bagian 3 â€” Tes Manual (penting banget sebelum otomatisasi)

Jalankan VNC dulu:

```bash
vncserver :1
```

Jika pertama kali, dia akan minta password. Set aja.

Sekarang jalankan websockify manual:

```bash
websockify -v --web /usr/share/novnc/ 0.0.0.0:6080 127.0.0.1:5901
```

Test akses:

â€” Dari Wi-Fi:
`http://<IP_WLAN>:6080`

â€” Dari LAN:
`http://<IP_ETH>:6080`

Kalau dua-duanya bisa tampil desktop â†’ kamu siap masuk tahap otomatis.

---

# âš™ï¸ Bagian 4 â€” Buat service systemd agar noVNC otomatis berjalan saat Raspberry Pi hidup

Linux punya sistem bernama **systemd**, tugasnya mirip manager yang menjalankan program saat boot, restart otomatis saat crash, dan mengontrol dependensinya.

Kita akan buat satu service yang:

* autostart saat boot,
* otomatis menjalankan vncserver,
* otomatis menjalankan websockify,
* auto-restart kalau error,
* bind ke LAN dan Wi-Fi sekaligus.

## ğŸ“ 4.1 Buat file:

```bash
sudo nano /etc/systemd/system/novnc-dual.service
```

## ğŸ”¥ 4.2 Isi lengkap service systemd:

> Ini versi matang, tanpa tabrakan port, dengan network-wait, dan auto-restart.

```ini
[Unit]
Description=Auto Start VNC + noVNC (LAN + WiFi)
After=network-online.target
Wants=network-online.target

[Service]
User=pi
Type=simple
Environment=DISPLAY=:1

# Jalankan VNC server (desktop)
ExecStartPre=/usr/bin/vncserver :1

# Jalankan noVNC-websockify untuk akses web
ExecStart=/usr/bin/websockify --web /usr/share/novnc/ 0.0.0.0:6080 127.0.0.1:5901

# Auto restart saat crash atau network berubah
Restart=always
RestartSec=5
StartLimitIntervalSec=0

[Install]
WantedBy=multi-user.target
```

Kalau user kamu bukan `pi`, ubah bagian:

```
User=pi
```

Simpan: `CTRL + O`, Enter, `CTRL + X`.

---

# ğŸš€ Bagian 5 â€” Aktifkan otomatis saat boot

```bash
sudo systemctl daemon-reload
sudo systemctl enable novnc-dual.service
sudo systemctl start novnc-dual.service
```

Cek status:

```bash
sudo systemctl status novnc-dual.service
```

Kalau muncul:

```
Listening on 0.0.0.0:6080
```

Maka service bekerja.

---

# ğŸ” Bagian 6 â€” Cek log (buat debugging kalau error)

```bash
journalctl -u novnc-dual.service -f
```

Kamu bakal melihat log seperti:

```
vncserver started on :1
websockify: Listening on 0.0.0.0:6080
```

Jika ada error misalnya port sudah dipakai, websockify akan ngomel dan service otomatis restart.

---

# ğŸŒ Bagian 7 â€” Akses dari dua jaringan

Cek IP raspi:

```bash
hostname -I
```

Misal hasil:

```
192.168.1.10 192.168.4.20
```

Uji:

LAN:
`http://192.168.1.10:6080`

Wi-Fi:
`http://192.168.4.20:6080`

Kalau dua-duanya jalan â†’ **service systemd sukses**.

---

# ğŸ”’ Bagian 8 â€” Buka port jika memakai firewall

Jika UFW aktif:

```bash
sudo ufw allow 5901/tcp
sudo ufw allow 6080/tcp
```

---

# ğŸ§  Bagian 9 â€” Fitur Tambahan (Opsional tapi keren)

Kamu bisa menambahkan **auto-show IP LAN + Wi-Fi di log boot** supaya cepat tahu alamat yang bisa diakses.

Edit service:

```bash
sudo nano /etc/systemd/system/novnc-dual.service
```

Tambahkan tepat di bawah `ExecStartPre`:

```ini
ExecStartPre=/bin/bash -c "echo 'Active IPs: ' $(hostname -I)"
```

Service akan tampil:

```
Active IPs: 192.168.1.10 192.168.4.20
```

Saat boot.

---

# ğŸ‰ Hasil Akhir

â€¢ Raspi otomatis membuka VNC desktop
â€¢ noVNC otomatis hidup di port 6080
â€¢ Bisa dari LAN & Wi-Fi tanpa konfigurasi tambahan
â€¢ Auto-restart kalau jaringan berubah
â€¢ Auto-start saat boot

Semua berjalan tanpa harus buka terminal setiap startup.

---

# Mau versi lebih ekstrem?

Aku bisa buat:

* versi **dua port terpisah** (LAN 7080, Wi-Fi 6080)
* versi **redirect http â†’ noVNC otomatis**
* versi **dengan autentikasi password web**
* versi **menggabungkan VNC RealVNC bawaan + noVNC**

Kamu ingin yang mana?

